import{a as e,f as t,h as n,i as r,o as i,r as a,s as o,u as s}from"./index-D3yLV-Xw.js";import{r as c}from"./demoData-C31J8f5R.js";var l=n(t(),1),u=e(),d=()=>{let{id:e}=s(),{isAuthenticated:t}=r(),[n,d]=(0,l.useState)(null),[f,p]=(0,l.useState)([]),[m,h]=(0,l.useState)(!0),[g,_]=(0,l.useState)(``),[v,y]=(0,l.useState)({}),[b,x]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{h(!0);let t=await i.getCourse(e);d(t.data.course),p(t.data.userProgress||[]),x(!1),t.data.course?.modules?.length>0&&y({[t.data.course.modules[0].id]:!0})}catch(n){if(console.error(`Error fetching course:`,n),t)_(`Gagal memuat course. Silakan coba lagi.`);else{let t=c(e);t?(d(t),x(!0),t.modules?.length>0&&y({[t.modules[0].id]:!0})):_(`Course tidak ditemukan.`)}}finally{h(!1)}})()},[e,t]);let S=e=>{y(t=>({...t,[e]:!t[e]}))},C=e=>f.find(t=>t.lesson_id===e),w=()=>n?.modules?.reduce((e,t)=>e+(t.lessons?.length||0),0)||0,T=()=>f.filter(e=>e.completed===!0).length;if(m)return(0,u.jsx)(`div`,{className:`page-container py-12`,children:(0,u.jsx)(`div`,{className:`container-main`,children:(0,u.jsx)(a,{size:`lg`,text:`Memuat materi...`})})});if(!m&&(g||!n))return(0,u.jsx)(`div`,{className:`page-container py-12`,children:(0,u.jsxs)(`div`,{className:`container-main text-center`,children:[(0,u.jsx)(`svg`,{className:`w-16 h-16 text-gray-300 mx-auto mb-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z`})}),(0,u.jsx)(`h2`,{className:`text-xl font-semibold text-gray-900 mb-2`,children:`Materi tidak ditemukan`}),(0,u.jsx)(`p`,{className:`text-gray-500 mb-4`,children:g||`Course tidak tersedia`}),(0,u.jsx)(o,{to:`/courses`,className:`btn-primary`,children:`Kembali ke Materi TKA`})]})});let E=w()>0?Math.round(T()/w()*100):0;return(0,u.jsx)(`div`,{className:`page-container py-4 sm:py-8`,children:(0,u.jsxs)(`div`,{className:`container-main px-3 sm:px-4`,children:[b&&(0,u.jsx)(`div`,{className:`mb-4 sm:mb-6 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg text-blue-700`,children:(0,u.jsxs)(`div`,{className:`flex items-center`,children:[(0,u.jsx)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 mr-2 flex-shrink-0`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z`})}),(0,u.jsxs)(`span`,{className:`text-xs sm:text-sm`,children:[(0,u.jsx)(`strong`,{children:`Mode Demo:`}),` Data contoh dengan video. Login untuk tracking.`]})]})}),(0,u.jsxs)(`nav`,{className:`flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm text-gray-500 mb-4 sm:mb-6`,children:[(0,u.jsx)(o,{to:`/courses`,className:`hover:text-primary-600`,children:`Materi`}),(0,u.jsx)(`svg`,{className:`w-3 h-3 sm:w-4 sm:h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 5l7 7-7 7`})}),(0,u.jsx)(`span`,{className:`text-gray-900 truncate`,children:n.title})]}),(0,u.jsxs)(`div`,{className:`grid lg:grid-cols-3 gap-4 sm:gap-8`,children:[(0,u.jsxs)(`div`,{className:`lg:col-span-2`,children:[(0,u.jsxs)(`div`,{className:`card p-4 sm:p-8 mb-4 sm:mb-6`,children:[(0,u.jsx)(`span`,{className:`inline-block px-2 sm:px-3 py-0.5 sm:py-1 bg-primary-100 text-primary-700 text-xs sm:text-sm font-medium rounded-full mb-3 sm:mb-4`,children:n.category}),(0,u.jsx)(`h1`,{className:`text-xl sm:text-3xl font-bold text-gray-900 mb-2 sm:mb-4`,children:n.title}),(0,u.jsx)(`p`,{className:`text-gray-600 text-sm sm:text-lg mb-4 sm:mb-6`,children:n.description}),t&&(0,u.jsxs)(`div`,{className:`bg-gray-100 rounded-lg p-3 sm:p-4`,children:[(0,u.jsxs)(`div`,{className:`flex justify-between text-xs sm:text-sm mb-2`,children:[(0,u.jsx)(`span`,{className:`text-gray-600`,children:`Progress Anda`}),(0,u.jsxs)(`span`,{className:`font-medium text-gray-900`,children:[E,`%`]})]}),(0,u.jsx)(`div`,{className:`h-2 bg-gray-200 rounded-full overflow-hidden`,children:(0,u.jsx)(`div`,{className:`h-full bg-primary-600 rounded-full transition-all duration-300`,style:{width:`${E}%`}})}),(0,u.jsxs)(`p`,{className:`text-xs text-gray-500 mt-2`,children:[T(),` / `,w(),` selesai`]})]})]}),(0,u.jsxs)(`div`,{className:`space-y-3 sm:space-y-4`,children:[(0,u.jsx)(`h2`,{className:`text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4`,children:`Materi Pembelajaran`}),n.modules?.length===0?(0,u.jsx)(`div`,{className:`card p-6 sm:p-8 text-center`,children:(0,u.jsx)(`p`,{className:`text-gray-500 text-sm`,children:`Belum ada materi untuk subtes ini`})}):n.modules?.map((e,n)=>(0,u.jsxs)(`div`,{className:`card overflow-hidden`,children:[(0,u.jsxs)(`button`,{onClick:()=>S(e.id),className:`w-full p-3 sm:p-5 flex items-center justify-between hover:bg-gray-50 transition-colors`,children:[(0,u.jsxs)(`div`,{className:`flex items-center space-x-2 sm:space-x-4`,children:[(0,u.jsx)(`div`,{className:`w-8 h-8 sm:w-10 sm:h-10 bg-primary-100 rounded-lg flex items-center justify-center text-primary-600 font-semibold text-sm sm:text-base`,children:n+1}),(0,u.jsxs)(`div`,{className:`text-left`,children:[(0,u.jsx)(`h3`,{className:`font-semibold text-gray-900 text-sm sm:text-base`,children:e.title}),(0,u.jsxs)(`p`,{className:`text-xs sm:text-sm text-gray-500`,children:[e.lessons?.length||0,` lessons`]})]})]}),(0,u.jsx)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 transition-transform ${v[e.id]?`rotate-180`:``}`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19 9l-7 7-7-7`})})]}),v[e.id]&&(0,u.jsx)(`div`,{className:`border-t border-gray-100`,children:e.lessons?.length===0?(0,u.jsx)(`p`,{className:`p-3 sm:p-5 text-gray-500 text-xs sm:text-sm`,children:`Belum ada lesson`}):e.lessons?.map((e,n)=>{let r=C(e.id),i=r?.completed===!0,a=r&&!r.completed;return(0,u.jsxs)(o,{to:t||b?`/lesson/${e.id}`:`/login`,className:`flex items-center justify-between p-3 sm:p-5 hover:bg-gray-50 transition-colors border-b border-gray-50 last:border-b-0`,children:[(0,u.jsxs)(`div`,{className:`flex items-center space-x-2 sm:space-x-4 min-w-0 flex-1`,children:[(0,u.jsx)(`div`,{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center flex-shrink-0 ${i?`bg-green-100 text-green-600`:a?`bg-blue-100 text-blue-600`:`bg-gray-100 text-gray-400`}`,children:i?(0,u.jsx)(`svg`,{className:`w-3 h-3 sm:w-4 sm:h-4`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M5 13l4 4L19 7`})}):(0,u.jsx)(`span`,{className:`text-xs sm:text-sm font-medium`,children:n+1})}),(0,u.jsxs)(`div`,{className:`min-w-0 flex-1`,children:[(0,u.jsx)(`p`,{className:`font-medium text-gray-900 text-xs sm:text-base truncate`,children:e.title}),r?.score!==void 0&&(0,u.jsxs)(`p`,{className:`text-xs text-gray-500`,children:[`Skor: `,r.score,`%`]})]})]}),(0,u.jsxs)(`div`,{className:`flex items-center space-x-2 sm:space-x-3 flex-shrink-0`,children:[(0,u.jsxs)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:[(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z`}),(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M21 12a9 9 0 11-18 0 9 9 0 0118 0z`})]}),(0,u.jsx)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 hidden sm:block`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 5l7 7-7 7`})})]})]},e.id)})})]},e.id))]})]}),(0,u.jsx)(`div`,{className:`hidden lg:block lg:col-span-1`,children:(0,u.jsxs)(`div`,{className:`card p-4 sm:p-6 sticky top-24`,children:[(0,u.jsx)(`h3`,{className:`font-semibold text-gray-900 mb-3 sm:mb-4 text-sm sm:text-base`,children:`Info Course`}),(0,u.jsxs)(`div`,{className:`space-y-3 sm:space-y-4`,children:[(0,u.jsxs)(`div`,{className:`flex items-center text-gray-600 text-sm`,children:[(0,u.jsx)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 mr-2 sm:mr-3 text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10`})}),n.modules?.length||0,` Modules`]}),(0,u.jsxs)(`div`,{className:`flex items-center text-gray-600 text-sm`,children:[(0,u.jsx)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 mr-2 sm:mr-3 text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z`})}),w(),` Video Lessons`]}),(0,u.jsxs)(`div`,{className:`flex items-center text-gray-600 text-sm`,children:[(0,u.jsx)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 mr-2 sm:mr-3 text-gray-400`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,u.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4`})}),`Quiz di setiap lesson`]})]}),!t&&!b?(0,u.jsx)(o,{to:`/login`,className:`btn-primary w-full mt-4 sm:mt-6 text-sm sm:text-base`,children:`Login untuk Mulai`}):n.modules?.length>0&&n.modules[0].lessons?.length>0?(0,u.jsx)(o,{to:`/lesson/${n.modules[0].lessons[0].id}`,className:`btn-primary w-full mt-4 sm:mt-6 text-sm sm:text-base`,children:T()>0?`Lanjutkan`:`Mulai Belajar`}):null]})})]})]})})};export{d as default};