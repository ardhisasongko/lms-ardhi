import{r as B}from"./rolldown-runtime-km5iIlDX.js";import{_ as y,a as b,b as E,c as P,d as C,f as M,g as m,h as T,i as z,l as v,m as L,n as R,o as k,p as F,r as K,s as _,t as I,u as f,v as h}from"./chart-vendor-BxLEm8EH.js";import{a as N,i as $,l as O,n as H,o as W,r as G,s as Q,t as q,u as J}from"./react-vendor-B8Gnojlf.js";import"./pdf-vendor-BVTh8DlV.js";import{n as S}from"./index-BgP2VN91.js";import{t as U}from"./ExportService-B_GwXTkC.js";var a=B(E(),1),w=s=>{const t=[];for(let r=s;r>=0;r--){const l=new Date;l.setDate(l.getDate()-r),t.push(l.toLocaleDateString("id-ID",{day:"numeric",month:"short"}))}return t};const X=async()=>(await new Promise(s=>setTimeout(s,800)),{totalStudents:1250,activeStudents:843,totalCourses:12,totalQuizzesTaken:5430,averageScore:76.5,revenue:154e5}),Y=async()=>(await new Promise(s=>setTimeout(s,600)),w(6).map(s=>({name:s,students:Math.floor(Math.random()*50)+10}))),V=async()=>(await new Promise(s=>setTimeout(s,700)),[{name:"TKA Saintek",students:450,color:"#3B82F6"},{name:"TKA Soshum",students:380,color:"#10B981"},{name:"TPS",students:320,color:"#F59E0B"},{name:"Bahasa Inggris",students:210,color:"#EF4444"}]),Z=async s=>(await new Promise(t=>setTimeout(t,500)),[{subject:"Matematika",score:85,avg:70,fullMark:100},{subject:"Fisika",score:65,avg:68,fullMark:100},{subject:"Kimia",score:78,avg:72,fullMark:100},{subject:"Biologi",score:90,avg:75,fullMark:100},{subject:"B. Ind",score:88,avg:80,fullMark:100},{subject:"B. Ing",score:72,avg:74,fullMark:100}]),ee=async s=>(await new Promise(t=>setTimeout(t,600)),w(4).map(t=>({date:t,score:Math.floor(Math.random()*40)+60})));var e=J(),D=(0,a.memo)(()=>{const[s,t]=(0,a.useState)(null),[r,l]=(0,a.useState)([]),[c,u]=(0,a.useState)([]),[g,p]=(0,a.useState)(!0);if((0,a.useEffect)(()=>{(async()=>{try{const[n,j,d]=await Promise.all([X(),Y(),V()]);t(n),l(j),u(d)}catch(n){console.error("Failed to fetch analytics",n)}finally{p(!1)}})()},[]),g)return(0,e.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Memuat data analitik..."});const i=({title:o,value:n,icon:j,color:d,trend:x})=>(0,e.jsxs)("div",{className:"card p-6 flex items-start justify-between",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:o}),(0,e.jsx)("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:n}),x&&(0,e.jsxs)("p",{className:`text-xs mt-2 font-medium ${x>0?"text-green-600":"text-red-600"}`,children:[x>0?"+":"",x,"% dari bulan lalu"]})]}),(0,e.jsx)("div",{className:`p-3 rounded-lg bg-${d}-100 dark:bg-${d}-900/30 text-${d}-600 dark:text-${d}-400`,children:(0,e.jsx)(j,{size:24})})]});return(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,e.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard Admin"}),(0,e.jsxs)("button",{onClick:()=>{U(s,r),O.success("Laporan Excel berhasil diunduh")},className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:[(0,e.jsx)(G,{size:18}),(0,e.jsx)("span",{children:"Export Excel"})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,e.jsx)(i,{title:"Total Siswa",value:s.totalStudents,icon:q,color:"blue",trend:12}),(0,e.jsx)(i,{title:"Siswa Aktif",value:s.activeStudents,icon:Q,color:"green",trend:5}),(0,e.jsx)(i,{title:"Total Materi",value:s.totalCourses,icon:N,color:"purple"}),(0,e.jsx)(i,{title:"Rata-rata Skor",value:s.averageScore,icon:H,color:"orange",trend:2.4})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,e.jsxs)("div",{className:"card p-6",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Tren Pendaftaran Siswa (7 Hari)"}),(0,e.jsx)("div",{className:"h-72",children:(0,e.jsx)(h,{width:"100%",height:"100%",children:(0,e.jsxs)(I,{data:r,children:[(0,e.jsx)("defs",{children:(0,e.jsxs)("linearGradient",{id:"colorStudents",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,e.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),(0,e.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:0})]})}),(0,e.jsx)(v,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB"}),(0,e.jsx)(k,{dataKey:"name",tick:{fill:"#6B7280",fontSize:12},tickLine:!1,axisLine:!1}),(0,e.jsx)(b,{tick:{fill:"#6B7280",fontSize:12},tickLine:!1,axisLine:!1}),(0,e.jsx)(m,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),(0,e.jsx)(_,{type:"monotone",dataKey:"students",stroke:"#3B82F6",strokeWidth:3,fillOpacity:1,fill:"url(#colorStudents)"})]})})})]}),(0,e.jsxs)("div",{className:"card p-6",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Popularitas Materi"}),(0,e.jsx)("div",{className:"h-72",children:(0,e.jsx)(h,{width:"100%",height:"100%",children:(0,e.jsxs)(K,{children:[(0,e.jsx)(C,{data:c,cx:"50%",cy:"50%",innerRadius:60,outerRadius:100,paddingAngle:5,dataKey:"students",children:c.map((o,n)=>(0,e.jsx)(T,{fill:o.color},`cell-${n}`))}),(0,e.jsx)(m,{}),(0,e.jsx)(y,{verticalAlign:"bottom",height:36})]})})})]})]})]})});D.displayName="AdminDashboard";var A=(0,a.memo)(()=>{const{user:s}=S(),[t,r]=(0,a.useState)([]),[l,c]=(0,a.useState)([]),[u,g]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{const[i,o]=await Promise.all([Z(s.id),ee(s.id)]);r(i),c(o)}catch(i){console.error("Failed to fetch student analytics",i)}finally{g(!1)}})()},[s.id]),u?(0,e.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Memuat data progress..."}):(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6",children:(0,e.jsxs)("div",{children:[(0,e.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Halo, ",s.name,"! ðŸ‘‹"]}),(0,e.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"Siap lanjutkan belajar hari ini?"})]})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,e.jsxs)("div",{className:"card p-6 flex items-center space-x-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white border-none",children:[(0,e.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,e.jsx)(N,{size:24})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-blue-100 text-sm",children:"Materi Selesai"}),(0,e.jsx)("h3",{className:"text-2xl font-bold",children:"4 / 12"})]})]}),(0,e.jsxs)("div",{className:"card p-6 flex items-center space-x-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white border-none",children:[(0,e.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,e.jsx)(W,{size:24})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-purple-100 text-sm",children:"Rata-rata Skor"}),(0,e.jsx)("h3",{className:"text-2xl font-bold",children:"82.5"})]})]}),(0,e.jsxs)("div",{className:"card p-6 flex items-center space-x-4 bg-gradient-to-r from-green-500 to-green-600 text-white border-none",children:[(0,e.jsx)("div",{className:"p-3 bg-white/20 rounded-lg",children:(0,e.jsx)($,{size:24})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-green-100 text-sm",children:"Jam Belajar"}),(0,e.jsx)("h3",{className:"text-2xl font-bold",children:"12.5 Jam"})]})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,e.jsxs)("div",{className:"card p-6",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Analisis Kemampuan"}),(0,e.jsx)("div",{className:"h-80",children:(0,e.jsx)(h,{width:"100%",height:"100%",children:(0,e.jsxs)(R,{cx:"50%",cy:"50%",outerRadius:"80%",data:t,height:320,children:[(0,e.jsx)(L,{stroke:"#E5E7EB"}),(0,e.jsx)(M,{dataKey:"subject",tick:{fill:"#6B7280",fontSize:12}}),(0,e.jsx)(F,{angle:30,domain:[0,100]}),(0,e.jsx)(f,{name:"Skor Saya",dataKey:"score",stroke:"#3B82F6",strokeWidth:2,fill:"#3B82F6",fillOpacity:.5}),(0,e.jsx)(f,{name:"Rata-rata Siswa",dataKey:"avg",stroke:"#9CA3AF",strokeWidth:2,fill:"transparent",strokeDasharray:"3 3"}),(0,e.jsx)(y,{}),(0,e.jsx)(m,{})]})})})]}),(0,e.jsxs)("div",{className:"card p-6",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Riwayat Skor Quiz"}),(0,e.jsx)("div",{className:"h-80",children:(0,e.jsx)(h,{width:"100%",height:"100%",children:(0,e.jsxs)(z,{data:l,children:[(0,e.jsx)(v,{strokeDasharray:"3 3",vertical:!1,stroke:"#E5E7EB"}),(0,e.jsx)(k,{dataKey:"date",tick:{fill:"#6B7280",fontSize:12},tickLine:!1,axisLine:!1}),(0,e.jsx)(b,{domain:[0,100],tick:{fill:"#6B7280",fontSize:12},tickLine:!1,axisLine:!1}),(0,e.jsx)(m,{contentStyle:{borderRadius:"8px",border:"none",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}}),(0,e.jsx)(P,{type:"monotone",dataKey:"score",stroke:"#10B981",strokeWidth:3,activeDot:{r:8}})]})})})]})]})]})});A.displayName="StudentDashboard";var ne=()=>{const{user:s,isInstructor:t,isAdmin:r}=S();return(0,e.jsx)("div",{className:"page-container py-8",children:(0,e.jsx)("div",{className:"container-main",children:r||t?(0,e.jsx)(D,{}):(0,e.jsx)(A,{})})})};export{ne as default};
