import{r as W}from"./rolldown-runtime-km5iIlDX.js";import{b as S}from"./chart-vendor-BxLEm8EH.js";import{f as o,u as _,y as P}from"./react-vendor-B8Gnojlf.js";import{n as z,r as D,t as A}from"./index-BgP2VN91.js";import{r as V}from"./demoData-CY-vniqt.js";var n=W(S(),1),e=_(),T=()=>{const{id:d}=P(),{isAuthenticated:i}=z(),[r,u]=(0,n.useState)(null),[g,w]=(0,n.useState)([]),[p,j]=(0,n.useState)(!0),[f,k]=(0,n.useState)(""),[y,c]=(0,n.useState)({}),[x,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{(async()=>{try{j(!0);const t=await D.getCourse(d);u(t.data.course),w(t.data.userProgress||[]),b(!1),t.data.course?.modules?.length>0&&c({[t.data.course.modules[0].id]:!0})}catch(t){if(console.error("Error fetching course:",t),i)k("Gagal memuat course. Silakan coba lagi.");else{const a=V(d);a?(u(a),b(!0),a.modules?.length>0&&c({[a.modules[0].id]:!0})):k("Course tidak ditemukan.")}}finally{j(!1)}})()},[d,i]);const L=s=>{c(t=>({...t,[s]:!t[s]}))},M=s=>g.find(t=>t.lesson_id===s),m=()=>r?.modules?.reduce((s,t)=>s+(t.lessons?.length||0),0)||0,h=()=>g.filter(s=>s.completed===!0).length;if(p)return(0,e.jsx)("div",{className:"page-container py-12",children:(0,e.jsx)("div",{className:"container-main",children:(0,e.jsx)(A,{size:"lg",text:"Memuat materi..."})})});if(!p&&(f||!r))return(0,e.jsx)("div",{className:"page-container py-12",children:(0,e.jsxs)("div",{className:"container-main text-center",children:[(0,e.jsx)("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,e.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Materi tidak ditemukan"}),(0,e.jsx)("p",{className:"text-gray-500 mb-4",children:f||"Course tidak tersedia"}),(0,e.jsx)(o,{to:"/courses",className:"btn-primary",children:"Kembali ke Materi TKA"})]})});const v=m()>0?Math.round(h()/m()*100):0;return(0,e.jsx)("div",{className:"page-container py-4 sm:py-8",children:(0,e.jsxs)("div",{className:"container-main px-3 sm:px-4",children:[x&&(0,e.jsx)("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-blue-50 border border-blue-200 rounded-lg text-blue-700",children:(0,e.jsxs)("div",{className:"flex items-center",children:[(0,e.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,e.jsxs)("span",{className:"text-xs sm:text-sm",children:[(0,e.jsx)("strong",{children:"Mode Demo:"})," Data contoh dengan video. Login untuk tracking."]})]})}),(0,e.jsxs)("nav",{className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm text-gray-500 dark:text-gray-400 mb-4 sm:mb-6",children:[(0,e.jsx)(o,{to:"/courses",className:"hover:text-primary-600 dark:hover:text-primary-400",children:"Materi"}),(0,e.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,e.jsx)("span",{className:"text-gray-900 dark:text-white truncate",children:r.title})]}),(0,e.jsxs)("div",{className:"grid lg:grid-cols-3 gap-4 sm:gap-8",children:[(0,e.jsxs)("div",{className:"lg:col-span-2",children:[(0,e.jsxs)("div",{className:"card p-4 sm:p-8 mb-4 sm:mb-6",children:[(0,e.jsx)("span",{className:"inline-block px-2 sm:px-3 py-0.5 sm:py-1 bg-primary-100 dark:bg-primary-900/50 text-primary-700 dark:text-primary-300 text-xs sm:text-sm font-medium rounded-full mb-3 sm:mb-4",children:r.category}),(0,e.jsx)("h1",{className:"text-xl sm:text-3xl font-bold text-gray-900 dark:text-white mb-2 sm:mb-4",children:r.title}),(0,e.jsx)("p",{className:"text-gray-600 dark:text-gray-300 text-sm sm:text-lg mb-4 sm:mb-6",children:r.description}),i&&(0,e.jsxs)("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-lg p-3 sm:p-4",children:[(0,e.jsxs)("div",{className:"flex justify-between text-xs sm:text-sm mb-2",children:[(0,e.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Progress Anda"}),(0,e.jsxs)("span",{className:"font-medium text-gray-900 dark:text-white",children:[v,"%"]})]}),(0,e.jsx)("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:(0,e.jsx)("div",{className:"h-full bg-primary-600 rounded-full transition-all duration-300",style:{width:`${v}%`}})}),(0,e.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[h()," / ",m()," selesai"]})]})]}),(0,e.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,e.jsx)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 mb-3 sm:mb-4",children:"Materi Pembelajaran"}),r.modules?.length===0?(0,e.jsx)("div",{className:"card p-6 sm:p-8 text-center",children:(0,e.jsx)("p",{className:"text-gray-500 text-sm",children:"Belum ada materi untuk subtes ini"})}):r.modules?.map((s,t)=>(0,e.jsxs)("div",{className:"card overflow-hidden",children:[(0,e.jsxs)("button",{onClick:()=>L(s.id),className:"w-full p-3 sm:p-5 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,e.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-primary-100 rounded-lg flex items-center justify-center text-primary-600 font-semibold text-sm sm:text-base",children:t+1}),(0,e.jsxs)("div",{className:"text-left",children:[(0,e.jsx)("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:s.title}),(0,e.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:[s.lessons?.length||0," lessons"]})]})]}),(0,e.jsx)("svg",{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 transition-transform ${y[s.id]?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y[s.id]&&(0,e.jsx)("div",{className:"border-t border-gray-100",children:s.lessons?.length===0?(0,e.jsx)("p",{className:"p-3 sm:p-5 text-gray-500 text-xs sm:text-sm",children:"Belum ada lesson"}):s.lessons?.map((a,C)=>{const l=M(a.id),N=l?.completed===!0,B=l&&!l.completed;return(0,e.jsxs)(o,{to:i||x?`/lesson/${a.id}`:"/login",className:"flex items-center justify-between p-3 sm:p-5 hover:bg-gray-50 transition-colors border-b border-gray-50 last:border-b-0",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4 min-w-0 flex-1",children:[(0,e.jsx)("div",{className:`w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center flex-shrink-0 ${N?"bg-green-100 text-green-600":B?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-400"}`,children:N?(0,e.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,e.jsx)("span",{className:"text-xs sm:text-sm font-medium",children:C+1})}),(0,e.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,e.jsx)("p",{className:"font-medium text-gray-900 text-xs sm:text-base truncate",children:a.title}),l?.score!==void 0&&(0,e.jsxs)("p",{className:"text-xs text-gray-500",children:["Skor: ",l.score,"%"]})]})]}),(0,e.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 flex-shrink-0",children:[(0,e.jsxs)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),(0,e.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400 hidden sm:block",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},a.id)})})]},s.id))]})]}),(0,e.jsx)("div",{className:"hidden lg:block lg:col-span-1",children:(0,e.jsxs)("div",{className:"card p-4 sm:p-6 sticky top-24",children:[(0,e.jsx)("h3",{className:"font-semibold text-gray-900 mb-3 sm:mb-4 text-sm sm:text-base",children:"Info Course"}),(0,e.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,e.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,e.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 sm:mr-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),r.modules?.length||0," Modules"]}),(0,e.jsxs)("div",{className:"flex items-center text-gray-600 dark:text-gray-300 text-sm",children:[(0,e.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 sm:mr-3 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),m()," Video Lessons"]}),(0,e.jsxs)("div",{className:"flex items-center text-gray-600 text-sm",children:[(0,e.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2 sm:mr-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,e.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Quiz di setiap lesson"]})]}),!i&&!x?(0,e.jsx)(o,{to:"/login",className:"btn-primary w-full mt-4 sm:mt-6 text-sm sm:text-base",children:"Login untuk Mulai"}):r.modules?.length>0&&r.modules[0].lessons?.length>0?(0,e.jsx)(o,{to:`/lesson/${r.modules[0].lessons[0].id}`,className:"btn-primary w-full mt-4 sm:mt-6 text-sm sm:text-base",children:h()>0?"Lanjutkan":"Mulai Belajar"}):null]})})]})]})})};export{T as default};
