import{a as e,f as t,h as n,i as r,l as i,o as a,r as o,s,u as c}from"./index-D3yLV-Xw.js";import{i as l}from"./demoData-C31J8f5R.js";var u=n(t(),1),d=e(),f=()=>{let{id:e}=c(),{isAuthenticated:t,isDemo:n}=r();i();let[f,p]=(0,u.useState)(null),[m,h]=(0,u.useState)([]),[g,_]=(0,u.useState)(null),[v,y]=(0,u.useState)({prevLesson:null,nextLesson:null}),[b,x]=(0,u.useState)(!0),[S,C]=(0,u.useState)(``),[w,T]=(0,u.useState)(!1);(0,u.useEffect)(()=>{(async()=>{try{if(x(!0),t){let t=await a.getLesson(e);p(t.data.lesson),h(t.data.quizzes||[]),_(t.data.userProgress),y(t.data.navigation),T(n)}else{T(!0);let t=l(e);t?(p(t.lesson),h(t.quizzes),y(t.navigation)):C(`Lesson tidak ditemukan.`)}}catch(t){console.error(`Error fetching lesson:`,t);let n=l(e);n?(p(n.lesson),h(n.quizzes),y(n.navigation),T(!0)):C(`Lesson tidak ditemukan.`)}finally{x(!1)}})()},[e,t]);let E=f?(e=>{if(!e)return null;let t=e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/);return t&&t[2].length===11?t[2]:null})(f.video_url||f.youtube_url):null;return b?(0,d.jsx)(`div`,{className:`page-container py-12`,children:(0,d.jsx)(`div`,{className:`container-main`,children:(0,d.jsx)(o,{size:`lg`,text:`Memuat pembahasan...`})})}):S||!f?(0,d.jsx)(`div`,{className:`page-container py-12`,children:(0,d.jsxs)(`div`,{className:`container-main text-center`,children:[(0,d.jsx)(`h2`,{className:`text-xl font-semibold text-gray-900 mb-2`,children:`Pembahasan tidak ditemukan`}),(0,d.jsx)(`p`,{className:`text-gray-500 mb-4`,children:S}),(0,d.jsx)(s,{to:`/courses`,className:`btn-primary`,children:`Kembali ke Materi TKA`})]})}):(0,d.jsx)(`div`,{className:`page-container py-4 sm:py-6`,children:(0,d.jsxs)(`div`,{className:`container-main px-3 sm:px-4`,children:[w&&!t&&!1,f.course&&(0,d.jsxs)(`div`,{className:`card p-4 sm:p-6 mb-4 sm:mb-6`,children:[(0,d.jsx)(`span`,{className:`inline-block px-2 sm:px-3 py-0.5 sm:py-1 bg-primary-100 text-primary-700 text-xs sm:text-sm font-medium rounded-full mb-2 sm:mb-3`,children:f.course.category}),(0,d.jsx)(`h1`,{className:`text-xl sm:text-2xl font-bold text-gray-900 mb-1 sm:mb-2`,children:f.course.title}),(0,d.jsx)(`p`,{className:`text-gray-600 text-xs sm:text-base mb-2 sm:mb-4`,children:f.course.description})]}),(0,d.jsxs)(`nav`,{className:`flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm text-gray-500 mb-4 sm:mb-6 flex-wrap`,children:[(0,d.jsx)(s,{to:`/courses`,className:`hover:text-primary-600`,children:`TKA`}),(0,d.jsx)(`svg`,{className:`w-3 h-3 sm:w-4 sm:h-4 flex-shrink-0`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 5l7 7-7 7`})}),(0,d.jsx)(s,{to:`/lesson/${f.id}`,className:`hover:text-primary-600 truncate max-w-[100px] sm:max-w-none`,children:f.title})]}),(0,d.jsxs)(`div`,{className:`grid lg:grid-cols-3 gap-4 sm:gap-8`,children:[(0,d.jsxs)(`div`,{className:`lg:col-span-2`,children:[(f.video_url||f.youtube_url)&&(0,d.jsx)(`div`,{className:`card overflow-hidden mb-4 sm:mb-6`,children:E?(0,d.jsx)(`div`,{className:`video-container`,children:(0,d.jsx)(`iframe`,{src:`https://www.youtube.com/embed/${E}?rel=0&modestbranding=1`,title:f.title,allow:`accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture`,allowFullScreen:!0,loading:`lazy`})}):(0,d.jsx)(`div`,{className:`aspect-video bg-gray-100 flex items-center justify-center`,children:(0,d.jsxs)(`div`,{className:`text-center text-gray-500`,children:[(0,d.jsx)(`svg`,{className:`w-12 h-12 sm:w-16 sm:h-16 mx-auto mb-2 opacity-50`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z`})}),(0,d.jsx)(`p`,{className:`text-sm`,children:`Video tidak tersedia`})]})})}),(0,d.jsxs)(`div`,{className:`card p-3 sm:p-6 mb-4 sm:mb-6`,children:[(0,d.jsx)(`h1`,{className:`text-lg sm:text-2xl font-bold text-gray-900 mb-2 sm:mb-4`,children:f.title}),f.module&&(0,d.jsxs)(`p`,{className:`text-gray-500 mb-2 sm:mb-4 text-xs sm:text-base`,children:[(0,d.jsx)(`span`,{className:`font-medium`,children:`Module:`}),` `,f.module.title]}),f.summary&&(0,d.jsxs)(`div`,{className:`prose prose-gray max-w-none prose-sm sm:prose-base`,children:[(0,d.jsx)(`h3`,{className:`text-base sm:text-lg font-semibold text-gray-900 mb-1 sm:mb-2`,children:`Ringkasan`}),(0,d.jsx)(`p`,{className:`text-gray-600 whitespace-pre-line text-sm sm:text-base`,children:f.summary})]})]}),m.length>0&&(0,d.jsx)(`div`,{className:`card p-3 sm:p-6 mb-4 sm:mb-6`,children:(0,d.jsxs)(`div`,{className:`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 sm:gap-0`,children:[(0,d.jsxs)(`div`,{children:[(0,d.jsx)(`h3`,{className:`text-base sm:text-lg font-semibold text-gray-900`,children:`Latihan Soal`}),(0,d.jsxs)(`p`,{className:`text-gray-500 text-xs sm:text-sm mt-1`,children:[m.length,` soal â€¢ Min 70%`]}),g&&(0,d.jsx)(`p`,{className:`text-xs sm:text-sm mt-1 sm:mt-2 font-medium ${g.completed?`text-green-600`:`text-orange-600`}`,children:g.completed?`Skor: ${g.score}%`:`Skor terakhir: ${g.score}%`})]}),(0,d.jsx)(s,{to:`/quiz/${e}`,className:`btn-primary text-sm sm:text-base py-2 px-3 sm:py-2.5 sm:px-4 w-full sm:w-auto text-center`,children:g?`Ulangi`:`Mulai`})]})}),(0,d.jsxs)(`div`,{className:`flex justify-between items-center mt-4 sm:mt-6 gap-2`,children:[v.prevLesson?(0,d.jsxs)(s,{to:`/lesson/${v.prevLesson.id}`,className:`flex items-center text-gray-600 hover:text-primary-600 transition-colors flex-1 min-w-0`,children:[(0,d.jsx)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 mr-1 sm:mr-2 flex-shrink-0`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M15 19l-7-7 7-7`})}),(0,d.jsxs)(`div`,{className:`text-left min-w-0`,children:[(0,d.jsx)(`p`,{className:`text-xs text-gray-400 hidden sm:block`,children:`Sebelumnya`}),(0,d.jsx)(`p`,{className:`font-medium text-xs sm:text-base truncate`,children:v.prevLesson.title})]})]}):(0,d.jsx)(`div`,{className:`flex-1`}),v.nextLesson?(0,d.jsxs)(s,{to:`/lesson/${v.nextLesson.id}`,className:`flex items-center text-gray-600 hover:text-primary-600 transition-colors flex-1 min-w-0 justify-end`,children:[(0,d.jsxs)(`div`,{className:`text-right min-w-0`,children:[(0,d.jsx)(`p`,{className:`text-xs text-gray-400 hidden sm:block`,children:`Selanjutnya`}),(0,d.jsx)(`p`,{className:`font-medium text-xs sm:text-base truncate`,children:v.nextLesson.title})]}),(0,d.jsx)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 ml-1 sm:ml-2 flex-shrink-0`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 5l7 7-7 7`})})]}):(0,d.jsx)(`div`,{className:`flex-1`})]})]}),(0,d.jsx)(`div`,{className:`hidden lg:block lg:col-span-1`,children:(0,d.jsxs)(`div`,{className:`card p-4 sm:p-6 sticky top-24`,children:[(0,d.jsx)(`h3`,{className:`font-semibold text-gray-900 mb-3 sm:mb-4 text-sm sm:text-base`,children:`Status`}),(0,d.jsxs)(`div`,{className:`space-y-3 sm:space-y-4`,children:[(0,d.jsxs)(`div`,{className:`p-3 sm:p-4 rounded-lg ${g?.completed?`bg-green-50 border border-green-200`:`bg-gray-50 border border-gray-200`}`,children:[(0,d.jsx)(`div`,{className:`flex items-center`,children:g?.completed?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 text-green-600 mr-2`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z`})}),(0,d.jsx)(`span`,{className:`text-green-700 font-medium text-sm sm:text-base`,children:`Selesai`})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(`svg`,{className:`w-4 h-4 sm:w-5 sm:h-5 text-gray-400 mr-2`,fill:`none`,stroke:`currentColor`,viewBox:`0 0 24 24`,children:(0,d.jsx)(`path`,{strokeLinecap:`round`,strokeLinejoin:`round`,strokeWidth:2,d:`M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z`})}),(0,d.jsx)(`span`,{className:`text-gray-600 font-medium text-sm sm:text-base`,children:`Dalam Progress`})]})}),g?.score!==void 0&&(0,d.jsxs)(`p`,{className:`text-xs sm:text-sm mt-2 text-gray-600`,children:[`Skor Quiz:`,` `,(0,d.jsxs)(`span`,{className:`font-semibold`,children:[g.score,`%`]})]})]}),f.course&&(0,d.jsx)(s,{to:`/course/${f.course.id}`,className:`btn-outline w-full text-sm sm:text-base`,children:`Lihat Semua Materi`})]})]})})]})]})})};export{f as default};